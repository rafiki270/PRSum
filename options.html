<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>PRSum Options</title>
    <style>
      body { font: 14px/1.4 -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 20px; }
      label { display: block; margin: 12px 0 6px; }
      input[type="text"], input[type="password"], select { width: 520px; padding: 8px; font-size: 14px; }
      .row { margin-bottom: 14px; }
      button { padding: 8px 12px; }
      .hint { color: #666; font-size: 12px; }
    </style>
  </head>
  <body>
    <h2>PRSum Options</h2>
    <div class="row">
      <label for="defaultEngine">Default Engine</label>
      <select id="defaultEngine">
        <option value="chatgpt">ChatGPT (OpenAI)</option>
        <option value="gemini">Gemini (Google)</option>
        <option value="vertex">Vertex AI (Google Cloud)</option>
      </select>
    </div>

    <div class="row">
      <label><input type="checkbox" id="autoSummarize" /> Summarize immediately when opening the popup</label>
      <div class="hint">If disabled, the popup shows the last summary for the current page and wonâ€™t refresh unless you click Summarize.</div>
    </div>

    <h3>OpenAI</h3>
    <div class="row">
      <label for="openaiKey">OpenAI API Key</label>
      <input id="openaiKey" type="password" placeholder="sk-..." autocomplete="off" />
      <div class="hint">Stored locally in the extension. Visible only to this browser profile.</div>
    </div>
    <div class="row">
      <label for="openaiModel">OpenAI Model</label>
      <input id="openaiModel" type="text" placeholder="gpt-4o-mini (or your preferred)" />
      <div class="hint">Examples: gpt-4o, gpt-4.1, gpt-4o-mini. If you have access to newer models, enter their exact name.</div>
    </div>

    <h3>Gemini</h3>
    <div class="row">
      <label for="geminiKey">Gemini API Key</label>
      <input id="geminiKey" type="password" placeholder="AIza..." autocomplete="off" />
      <div class="hint">Used with the Generative Language API (generativelanguage.googleapis.com).</div>
    </div>
    <div class="row">
      <label for="geminiModel">Gemini Model</label>
      <input id="geminiModel" type="text" placeholder="gemini-2.0-flash (or your preferred)" />
      <div class="hint">Examples: gemini-2.0-flash, gemini-1.5-pro.</div>
    </div>

    <h3>Vertex AI</h3>
    <div class="row">
      <label for="vertexProject">Project ID</label>
      <input id="vertexProject" type="text" placeholder="my-gcp-project" />
    </div>
    <div class="row">
      <label for="vertexLocation">Location (region)</label>
      <input id="vertexLocation" type="text" placeholder="us-central1" />
      <div class="hint">Examples: us-central1, europe-west1.</div>
    </div>
    <div class="row">
      <label for="vertexModel">Model</label>
      <input id="vertexModel" type="text" placeholder="gemini-1.5-flash-002 or publishers/google/models/gemini-1.5-flash-002" />
      <div class="hint">Use short name or full path.</div>
    </div>
    <div class="row">
      <label for="vertexToken">Access Token</label>
      <input id="vertexToken" type="password" placeholder="Paste short-lived OAuth token" autocomplete="off" />
      <div class="hint">Tip: <code>gcloud auth print-access-token</code>. Token is stored locally and used as Bearer.</div>
    </div>
    <div class="row">
      <label for="vertexClientId">OAuth Client ID (Web)</label>
      <input id="vertexClientId" type="text" placeholder="1234567890-abcdefg.apps.googleusercontent.com" />
      <div class="hint">Use a Google OAuth 2.0 Web client. Add the redirect URI below in Google Cloud Console.</div>
    </div>
    <div class="row">
      <button id="vertexOAuth">Sign in with Google</button>
      <div class="hint">Redirect URI: <code id="vertexRedirect"></code></div>
    </div>

    <h3>Instruction Templates</h3>
    <div class="row">
      <label for="prInstructions">PR Instructions</label>
      <textarea id="prInstructions" rows="8" style="width: 100%; font-family: ui-monospace, Menlo, Consolas, monospace;"></textarea>
      <div class="hint">Guidance for PR summarization. Tip: avoid JSON; use human-readable sections and fenced code blocks only for real code.</div>
    </div>
    <div class="row">
      <label for="pageInstructions">Page Instructions</label>
      <textarea id="pageInstructions" rows="6" style="width: 100%; font-family: ui-monospace, Menlo, Consolas, monospace;"></textarea>
      <div class="hint">Guidance for non-PR pages. You can keep this concise.</div>
    </div>

    <div class="row">
      <button id="save">Save</button>
      <span id="status" class="hint"></span>
    </div>
    <script src="options.js"></script>
  </body>
  </html>
